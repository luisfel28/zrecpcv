<mvc:View controllerName="fidelidademundial.com.zrecpcv.controller.criacao"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns:core="sap.ui.core"
    xmlns:t="sap.ui.table"
    xmlns="sap.m">
    <Page id="pagecri" title="{i18n>title}">
        <content>
            <HBox class="sapUiMediumMarginBegin sapUiSmallMarginTop">
                <Title level="H4" text="Dados Reserva" titleStyle="H4" />
            </HBox>
            <HBox>
                <VBox>
                    <HBox>
                        <VBox class="sapUiMediumMarginBegin sapUiSmallMarginTop">
                            <Label id="lblTitBukrs" labelFor="lblBukrs" text="Empresa" ></Label>
                            <Label id="lblBukrs" design="Bold" labelFor="" ></Label>
                        </VBox>                  
                    </HBox>                        
                    <HBox>
                        <VBox class="sapUiMediumMarginBegin sapUiSmallMarginTop">
                            <Label id="lblTitRecnnr" labelFor="lblRecnnr" text="Contrato" ></Label>
                            <Label id="lblRecnnr" design="Bold"></Label>
                        </VBox>                  
                    </HBox>                   
                </VBox>  
                <VBox class="sapUiMediumMarginBegin">
                    <HBox>
                        <VBox class="sapUiMediumMarginBegin sapUiSmallMarginTop">
                            <Label id="lblTitRecnTxt" labelFor="lblBukrs" text="Denominação" ></Label>
                            <Label id="lblRecnTxt" design="Bold" labelFor="" ></Label>
                        </VBox>                  
                    </HBox>                        
                    <HBox>
                        <VBox class="sapUiMediumMarginBegin sapUiSmallMarginTop">
                            <Label id="lblTitPartner" labelFor="lblRecnnr" text="Parceiro" ></Label>
                            <Label id="lblPartner" design="Bold"></Label>
                        </VBox>                  
                    </HBox>                   
                </VBox>                  
                <VBox class="sapUiMediumMarginBegin">
                    <HBox>
                        <VBox class="sapUiMediumMarginBegin sapUiSmallMarginTop">
                            <Label id="lblTitDtIni" labelFor="lblBukrs" text="Início Contrato" ></Label>
                            <DatePicker id="TxtDtIni" value="{
                                            'path': 'dadoscabec>/Recnbeg',
                                            'type': 'sap.ui.model.type.Date',
                                            'formatOptions': {
                                                'pattern': 'dd.MM.yyyy',
                                                'UTC': true
                                            }
                                        }" placeholder=" " />
                        </VBox>                  
                    </HBox>                        
                </VBox>                                  
                <VBox class="sapUiMediumMarginBegin">
                    <HBox>
                        <VBox class="sapUiMediumMarginBegin sapUiSmallMarginTop">
                            <Label id="lblTitDtFim" labelFor="lblRecnnr" text="Fim Contrato" ></Label>
                            <DatePicker id="TxtDtFim" value="{
                                            'path': 'dadoscabec>/Recnend1st',
                                            'type': 'sap.ui.model.type.Date',
                                            'formatOptions': {
                                                'pattern': 'dd.MM.yyyy',
                                                'UTC': true
                                            }
                                        }" placeholder=" " />
                        </VBox>                  
                    </HBox>                   
                </VBox>                                          
            </HBox> 
            <HBox>
                <VBox class="sapUiMediumMarginBegin " id="pnlCreate" visible="true">
                        <t:Table class="sapUiMediumMarginTop" enableSelectAll="false" enableBusyIndicator="true" alternateRowColors="true" selectionMode="None" 
                        showNoData="false" id="TabConditions" selectionBehavior="RowOnly"
                            rows="{ path:'/results', sorter: { path: 'Condtype' } }">
							<t:extension>
                                <OverflowToolbar style="Clear">
                                    <Title id="TabCreateListTitle" text="Condições" titleStyle="H3" level="H3"/>
                                </OverflowToolbar>
                            </t:extension>
                            <t:columns>
                                <t:Column width="12rem" >
									<Text text="Objeto de Cálculo"/>
                                    <t:template>
                                        <Label text="{Objnrcalc}" design="Bold" />
                                    </t:template>
								</t:Column>
                                <t:Column width="6rem" >
									<Text text="Tipo"/>
                                    <t:template>
                                        <Label text="{Condtype}" />
                                    </t:template>
								</t:Column>
                                <t:Column width="8rem" >
									<Text text="Objetivo Reserva"/>
                                    <t:template>
                                        <Label text="{Condpurposeext}" />
                                    </t:template>
								</t:Column>                       
                                <t:Column width="10rem" >
									<Text text="Válido Desde Reserva"/>
                                    <t:template>
                                        <Label text="{ path: 'Condvalidfrom', type: 'sap.ui.model.odata.type.Date' }" />
                                    </t:template>
								</t:Column>                                                                
                                <t:Column width="14rem" >
									<Text text="Objetivo CPCV"/>
                                     <t:template>
                                        <Select id="CboObjCond" 
                                            showSecondaryValues= "true"
                                            selectedKey="{Condpurposeextcpcv}" 
                                            items="{ path: 'main>/ZreShObjCondSet', sorter: { path: 'main>Condpurposeext' } }" >
                                            <core:ListItem text="{main>Xmcondpurposeext}" key="{main>Condpurposeext}" additionalText="{main>Condpurposeext}"/>
                                        </Select>                                                                
                                    </t:template> 
								</t:Column>         
                                <t:Column width="14rem" >
									<Text text="Válido Desde CPCV"/>
                                     <t:template>
                                    <DatePicker
                                        id="lblDateFrom"
                                        value="{
                                            'path': 'Condvalidfromcpcv',
                                            'type': 'sap.ui.model.type.Date',
                                            'formatOptions': {
                                                'pattern': 'dd/MM/y',
                                                'UTC': true
                                            }
                                        }"/>
                                    </t:template>
								</t:Column>         
                                <t:Column width="14rem" >
									<Text text="Preço Unidade"/>
                                    <t:template>
                                        <!-- <Label text="{Unitprice}" /> 
                                        <Label text="{ 
                                        parts:  [   'Unitprice',
                                                    'Condcurr'
                                                ],
                                            type: 'CurrencyType',
                                            formatOptions: {showMeasure: false, decimalSeparator: ',', groupingSeparator: '.'}
                                        }"
                                        
                                         />-->
                                         <ObjectNumber
                                            number="{
                                                parts:[{path:'Unitprice'},{path:'Condcurr'}],
                                                type: 'sap.ui.model.type.Currency',
                                                formatOptions: {showMeasure: false}
                                            }"
                                            unit="{Condcurr}" />
                                    </t:template>
								</t:Column>                                                                                                                  
	                        </t:columns>
						</t:Table>          
                </VBox>
            </HBox>                
        </content>                    
        <footer>
			<Toolbar>
				<Button text="Criar Contrato de Venda" type="Attention" width="250px" icon="sap-icon://SAP-icons-TNT/data" press="onCreateContCPCV" class="sapUiSmallMarginBegin"></Button>
			</Toolbar>
		</footer>
    </Page>
</mvc:View>
